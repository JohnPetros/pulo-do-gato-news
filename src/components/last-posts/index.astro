---
import { postsService } from '../../cms';

import PostCard from '../post-card/index.astro';

const posts = await postsService.fetchLastPosts();

console.log(posts[0]);
---

<section class='px-6 lg:px-0'>
  <div class='flex items-center justify-between'>
    <h2 class='text-gray-900 font-semibold sm:text-lg'>Notícias recentes</h2>
    <div>
      <a
        href='/posts'
        class='flex items-center gap-1 text-primary font-bold sm:text-lg'
      >
        Ver todas as notícias
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width='24'
          height='24'
          viewBox='0 0 24 24'
          fill='none'
          stroke='currentColor'
          stroke-width='2'
          stroke-linecap='round'
          stroke-linejoin='round'
          class='icon icon-tabler icons-tabler-outline icon-tabler-arrow-right'
          ><path stroke='none' d='M0 0h24v24H0z' fill='none'></path><path
            d='M5 12l14 0'></path><path d='M13 18l6 -6'></path><path
            d='M13 6l6 6'></path></svg
        >
      </a>
    </div>
  </div>

  <div class='grid grid-cols-1 lg:grid-cols-2 gap-10 mt-10'>
    <PostCard {...posts[0]} />
    <ul class='space-y-6 hidden lg:block'>
      {
        posts.slice(1).map(post => (
          <li>
            <PostCard {...post} isSmall />
          </li>
        ))
      }
    </ul>
    <ul class='space-y-6 lg:hidden'>
      {
        posts.slice(1).map(post => (
          <li>
            <PostCard {...post} isSmall />
          </li>
        ))
      }
    </ul>
  </div>
</section>
